{% extends 'layout.html' %}

{% block content %}

<main id="main">
    <header id="movie-header">
        <h1>Top Rated</h1>
    </header>

    <nav style="clear:both">
            <div style="float:left">
                {% if first_movie_url is not none %}
                    <button class="btn-general" onclick="location.href='{{first_movie_url}}'">First</button>
                {% else %}
                    <button class="btn-general-disabled" disabled>First</button>
                {% endif %}
                {% if prev_movie_url is not none %}
                    <button class="btn-general" onclick="location.href='{{prev_movie_url}}'">Previous</button>
                {% else %}
                    <button class="btn-general-disabled" disabled>Previous</button>
                {% endif %}
            </div>
            <div style="float:right">
                {% if next_movie_url is not none %}
                    <button class="btn-general" onclick="location.href='{{next_movie_url}}'">Next</button>
                {% else %}
                    <button class="btn-general-disabled" disabled>Next</button>
                {% endif %}
                {% if last_movie_url is not none %}
                    <button class="btn-general" onclick="location.href='{{last_movie_url}}'">Last</button>
                {% else %}
                    <button class="btn-general-disabled" disabled>Last</button>
                {% endif %}
            </div>
        </nav>

    {% for movie in movies %}
        <p id="movie">
            <h2>{{movie.title}}, {{ movie.release_year }}</h2>
            <p>{{movie.description}}</p>
            <br>
            <p>Directed by: {{movie.director.director_name}}</p>
            <p>Movie Runtime: {{movie.runtime_minutes}} minutes</p>
            <p>Overall Rating: {{movie.rating}}</p>
            <p>User Votes: {{movie.votes}}</p>
            <p>Total Revenue: ${{movie.revenue}} million</p>
            <p>Metascore: {{movie.metascore}}</p>
            <br>
            <p>Casts:
                {% for actor in movie.actors %}
                    {{actor.actor_name}}
                    {% if not loop.last %}
                        ,
                    {% endif %}
                {% endfor %}
            </p>

            <p>Genres:
                {% for genre in movie.genres %}
                    {{ genre.genre_name }}
                    {% if not loop.last %}
                        ,
                    {% endif %}
                {% endfor %}
            </p>
        </p>
    </article>
    {% endfor %}

    <nav style="clear:both">
        <div style="float:left">
            {% if first_movie_url is not none %}
                <button class="btn-general" onclick="location.href='{{first_movie_url}}'">First</button>
            {% else %}
                <button class="btn-general-disabled" disabled>First</button>
            {% endif %}
            {% if prev_movie_url is not none %}
                <button class="btn-general" onclick="location.href='{{prev_movie_url}}'">Previous</button>
            {% else %}
                <button class="btn-general-disabled" disabled>Previous</button>
            {% endif %}
        </div>

        <div style="float:right">
            {% if next_movie_url is not none %}
                <button class="btn-general" onclick="location.href='{{next_movie_url}}'">Next</button>
            {% else %}
                <button class="btn-general-disabled" disabled>Next</button>
            {% endif %}
            {% if last_movie_url is not none %}
                <button class="btn-general" onclick="location.href='{{last_movie_url}}'">Last</button>
            {% else %}
                <button class="btn-general-disabled" disabled>Last</button>
            {% endif %}
        </div>
    </nav>
</main>
{% endblock %}